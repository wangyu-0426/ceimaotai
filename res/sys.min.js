/**
 * Created by fujinliang on 15/3/16.
 */
var sys_activityID = "";
var sys_config = "";
var game_logo = "";
var game_id = "";

var share_title = "";
var share_message = "";
var share_image = "";
var share_href = location.href;

var guide_btn = "更多游戏";
var guide_href = "";
var is_prize = "";
var sys_is_weixin = false;
var game_max_score = 120;

var oldTitle = "";
var openid = null;

var endShowText = null;

function is_weixn() {
  var ua = navigator.userAgent.toLowerCase();
  if (ua.match(/MicroMessenger/i) == "micromessenger") {
    sys_is_weixin = true;
  }

  (adsbygoogle = window.adsbygoogle || []).push({});
}

is_weixn();

loadGameId();
function loadGameId() {
  var url = document.URL;
  var para = url.substring(url.lastIndexOf("/game/") + 1, url.length);
  var arr = para.split("/");
  if (arr.length >= 2) {
    game_id = arr[1];
  }
}

function gamePV_load() {
  //   ajaxLoad(
  //     "http://" + window.location.host + "/Service/GamePv/index",
  //     "gameId=" + game_id,
  //     ajaxOnLogoResult
  //   );
}

//gamePV_load();

function ajaxLoad(uri, postData, callback) {
  var request = window.XMLHttpRequest
    ? new XMLHttpRequest()
    : new ActiveXObject("Microsoft.XMLHTTP");
  request.onreadystatechange = callback;
  request.open("POST", uri);
  request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
  request.send(postData);
}

function ajaxOnLogoResult(evt) {
  if (
    evt.currentTarget.readyState == 4 &&
    (evt.currentTarget.status == 200 || evt.currentTarget.status == 0)
  ) {
    //var sys_config = JSON.parse(evt.currentTarget.responseText);
  }
}

function score_submit(gameScore, gameType) {
  console.log("score!!!");
  ajaxLoad(
    "http://" + window.location.host + "/Service/Score/index",
    "",
    scoreResult
  );
}

function scoreResult(Event) {
  cc.log("sysRepose");
  if (
    Event.currentTarget.response != null &&
    Event.currentTarget.response != ""
  ) {
    endShowText = JSON.parse(Event.currentTarget.response);
  }
}

function scoreGameId() {
  return game_id;
}

function score_share(score_title) {
  oldTitle = document.title;
  document.title = score_title;
}

function initTitle() {
  //document.title = oldTitle;
}

function getWebSiteUrl() {
  var host = window.location.host;
  return host.replace("g", "http://www");
}
